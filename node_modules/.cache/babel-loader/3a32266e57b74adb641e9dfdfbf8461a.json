{"ast":null,"code":"import _slicedToArray from\"/Users/idmcalculus/Documents/teamwork-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';var UserLogin=function UserLogin(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),mail=_useState2[0],setMail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isError=_useState6[0],setIsError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var handleSubmit=function handleSubmit(e){e.preventDefault();var url='https://idm-teamwork.herokuapp.com/api/v1/auth/signin';var data={email:mail,password:password};fetch(url,{method:\"POST\",body:JSON.stringify(data),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){if(data.status==='error'){console.log(data.error);setIsError(true);setMessage(data.error);}localStorage.setItem(\"token\",data.data.token);if(data.data.isAdmin===true){props.history.push(\"/dashboard\");}else{props.history.push('/feed');}console.log(data);}).catch(function(error){console.log(error);});};return React.createElement(\"div\",{className:\"container admin\"},React.createElement(\"div\",{className:\"row form-container\"},React.createElement(\"form\",{className:\"login col-sm-6\",onSubmit:handleSubmit},React.createElement(\"h3\",null,\"Welcome Login\"),React.createElement(\"input\",{required:true,type:\"email\",className:\"form-control\",placeholder:\"Email\",value:mail,onChange:function onChange(e){return setMail(e.target.value);}}),React.createElement(\"input\",{required:true,type:\"password\",className:\"form-control\",placeholder:\"Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),React.createElement(\"button\",{className:\"login-button\"},\"LOGIN\"),React.createElement(\"p\",{className:\"alert alert-danger\",role:\"alert\"},isError&&message)),React.createElement(\"div\",{className:\"welcome col-sm-6\"},React.createElement(\"h2\",null,\"Teamwork\"))));};export default UserLogin;","map":{"version":3,"sources":["/Users/idmcalculus/Documents/teamwork-frontend/src/components/Login/userlogin.js"],"names":["React","useState","UserLogin","props","mail","setMail","password","setPassword","isError","setIsError","message","setMessage","handleSubmit","e","preventDefault","url","data","email","fetch","method","body","JSON","stringify","headers","then","res","json","status","console","log","error","localStorage","setItem","token","isAdmin","history","push","catch","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\n\nconst UserLogin = props => {\n  const [mail, setMail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isError, setIsError] = useState(false);\n  const [message, setMessage] = useState('');\n  const handleSubmit = e => {\n    e.preventDefault();\n    const url = 'https://idm-teamwork.herokuapp.com/api/v1/auth/signin';\n    const data = {\n      email: mail,\n      password: password\n    };\n    fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify(data),\n      headers: { \"Content-Type\": \"application/json\" }\n    }).then(res => res.json()).then(data => {\n      if(data.status === 'error') {\n        console.log(data.error)\n          setIsError(true);\n        setMessage(data.error);\n      }\n      localStorage.setItem(\"token\", data.data.token);\n      if(data.data.isAdmin === true) {\n        props.history.push(\"/dashboard\");\n      } else {\n        props.history.push('/feed');\n      }\n      console.log(data);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n  return (\n    <div className=\"container admin\">\n      <div className=\"row form-container\">\n          <form className=\"login col-sm-6\" onSubmit={handleSubmit}>\n            <h3>Welcome Login</h3>\n            <input\n              required\n              type=\"email\"\n              className=\"form-control\"\n              placeholder=\"Email\"\n              value={mail}\n              onChange={e => setMail(e.target.value)}\n            />\n            <input\n              required\n              type=\"password\"\n                className=\"form-control\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n            />\n            <button className=\"login-button\">LOGIN</button>\n            <p className=\"alert alert-danger\" role=\"alert\">{isError && message}</p>\n          </form>\n        <div className=\"welcome col-sm-6\">\n          <h2>Teamwork</h2>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UserLogin;\n"]},"metadata":{},"sourceType":"module"}